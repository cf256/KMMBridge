"use strict";(self.webpackChunktouchlab=self.webpackChunktouchlab||[]).push([[9757],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(n),m=r,g=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return n?a.createElement(g,l(l({ref:t},c),{},{components:n})):a.createElement(g,l({ref:t},c))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[u]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6765:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const o={},l="SPM Local Dev Flow",i={unversionedId:"spm/IOS_LOCAL_DEV_SPM",id:"spm/IOS_LOCAL_DEV_SPM",title:"SPM Local Dev Flow",description:"After you have integrated your Kotlin module into Xcode using SPM, you may want to locally build and test your Kotlin code when making changes.",source:"@site/docs/spm/02_IOS_LOCAL_DEV_SPM.md",sourceDirName:"spm",slug:"/spm/IOS_LOCAL_DEV_SPM",permalink:"/docs/spm/IOS_LOCAL_DEV_SPM",draft:!1,editUrl:"https://github.com/touchlab/KMMBridge/tree/main/website/docs/spm/02_IOS_LOCAL_DEV_SPM.md",tags:[],version:"current",lastUpdatedBy:"Kevin Galligan",lastUpdatedAt:1678152604,formattedLastUpdatedAt:"Mar 7, 2023",sidebarPosition:2,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Using Swift Package Manager",permalink:"/docs/spm/IOS_SPM"}},s={},p=[],c={toc:p};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"spm-local-dev-flow"},"SPM Local Dev Flow"),(0,r.kt)("p",null,"After you have ",(0,r.kt)("a",{parentName:"p",href:"/docs/spm/IOS_SPM"},"integrated your Kotlin module into Xcode using SPM"),", you may want to locally build and test your Kotlin code when making changes."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"Experimental:"))," ",(0,r.kt)("em",{parentName:"p"},"While all of KMMBridge is relatively new, the SPM dev flow is very experimental. The most likely issues with be path resolutions.")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"As mentioned, SPM is not really integrated out of the box with Kotlin, and SPM itself does not make integrations easy (generally speaking). We have some support for local dev flow, but we are looking for feedback and improvements.")),(0,r.kt)("p",null,"Since KMMBridge is generating your ",(0,r.kt)("inlineCode",{parentName:"p"},"Package.swift")," files, the first step is to run a dev build step to build the local dev ",(0,r.kt)("inlineCode",{parentName:"p"},"Package.swift")," and locally build a debug version of the Kotlin code."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew spmDevBuild\n")),(0,r.kt)("p",null,"This should:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Build a debug version of the XCFramework"),(0,r.kt)("li",{parentName:"ul"},"Write a local dev path to ",(0,r.kt)("inlineCode",{parentName:"li"},"Package.swift"))),(0,r.kt)("p",null,"Next, you need to manually copy the whole Kotlin project into Xcode. That means, quite literally, drag the Kotlin project's folder into Xcode."),(0,r.kt)("video",{src:"https://tl-navigator-images.s3.amazonaws.com/docimages/dragspm.mp4"}),(0,r.kt)("p",null,"In the sample above, the pacakge ",(0,r.kt)("inlineCode",{parentName:"p"},"allshared")," is inside ",(0,r.kt)("inlineCode",{parentName:"p"},"KevsKmmTest"),". When you drag it in, if Xcode properly recognizes it, you'll see ",(0,r.kt)("inlineCode",{parentName:"p"},"allshared")," disappear, but when you build, things should work as expected."),(0,r.kt)("p",null,"When you run ",(0,r.kt)("inlineCode",{parentName:"p"},"spmDevBuild"),", it will build all architectures, which you probably don't need for testing on a simulator. To restrict architectures when building, you can pass in a Gradle param."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew spmDevBuild -PspmBuildTargets=ios_x64\n")),(0,r.kt)("p",null,"For Intel Macs, use ",(0,r.kt)("inlineCode",{parentName:"p"},"ios_x64"),". For arm Macs, use ",(0,r.kt)("inlineCode",{parentName:"p"},"ios_simulator_arm64"),". You can pass in multiple architectures by separating them with commas."),(0,r.kt)("p",null,'When you are done making and testing local changes, select the folder you dragged in, and remove it by right-clicking it and selecting "Delete". Make sure to select "Remove References" on the popup. Xcode should then reload the remote version you had previously.'),(0,r.kt)("video",{src:"https://tl-navigator-images.s3.amazonaws.com/docimages/removelocal.mp4"}))}u.isMDXComponent=!0}}]);