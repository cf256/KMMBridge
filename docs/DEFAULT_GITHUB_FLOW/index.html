<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-DEFAULT_GITHUB_FLOW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="alternate" type="application/rss+xml" href="/KMMBridge/blog/rss.xml" title="KMMBridge RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/KMMBridge/blog/atom.xml" title="KMMBridge Atom Feed"><title data-rh="true">Default Github Workflow | KMMBridge</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://touchlab.github.io/KMMBridge//KMMBridge/docs/DEFAULT_GITHUB_FLOW"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Default Github Workflow | KMMBridge"><meta data-rh="true" name="description" content="If you are hosting your repos in Github and can use Github Actions for CI, the Default Github Flow is the simplest way to start publishing Kotlin builds for iOS."><meta data-rh="true" property="og:description" content="If you are hosting your repos in Github and can use Github Actions for CI, the Default Github Flow is the simplest way to start publishing Kotlin builds for iOS."><link data-rh="true" rel="icon" href="/KMMBridge/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://touchlab.github.io/KMMBridge//KMMBridge/docs/DEFAULT_GITHUB_FLOW"><link data-rh="true" rel="alternate" href="https://touchlab.github.io/KMMBridge//KMMBridge/docs/DEFAULT_GITHUB_FLOW" hreflang="en"><link data-rh="true" rel="alternate" href="https://touchlab.github.io/KMMBridge//KMMBridge/docs/DEFAULT_GITHUB_FLOW" hreflang="x-default"><link rel="stylesheet" href="/KMMBridge/assets/css/styles.5195d9b1.css">
<link rel="preload" href="/KMMBridge/assets/js/runtime~main.8c6f2bed.js" as="script">
<link rel="preload" href="/KMMBridge/assets/js/main.d04cb9a9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/KMMBridge/"><div class="navbar__logo"><img src="/KMMBridge/img/Touchlab_Gradient.png" alt="Touchlab Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/KMMBridge/img/Touchlab_Gradient.png" alt="Touchlab Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title text--truncate">KMMBridge</b></a><a class="navbar__item navbar__link navbar__link--active" href="/KMMBridge/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/KMMBridge/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://touchlab.co/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Touchlab Site<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/touchlab/KMMBridge" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_dLyj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_mKqt"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><div class="docPage_ualW"><aside class="theme-doc-sidebar-container docSidebarContainer_UQUJ"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/KMMBridge/docs/intro">KMMBridge Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/KMMBridge/docs/DEFAULT_GITHUB_FLOW">Default Github Workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/KMMBridge/docs/IOS_DEV_SETUP">iOS Dev Setup</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/KMMBridge/docs/category/general-documentation">General Documentation</a><button aria-label="Toggle the collapsible sidebar category &#x27;General Documentation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/KMMBridge/docs/category/artifact-managers">Artifact Managers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Artifact Managers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/KMMBridge/docs/category/cocoapods">CocoaPods</a><button aria-label="Toggle the collapsible sidebar category &#x27;CocoaPods&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/KMMBridge/docs/category/swift-package-manager-spm">Swift Package Manager (SPM)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Swift Package Manager (SPM)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/KMMBridge/docs/TROUBLESHOOTING">Troubleshooting</a></li></ul></nav></div></aside><main class="docMainContainer_uL0j"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/KMMBridge/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_kU5B"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Default Github Workflow</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_bZGK theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_l22C">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Default Github Flow</h1><p>If you are hosting your repos in Github and can use Github Actions for CI, the Default Github Flow is the simplest way to start publishing Kotlin builds for iOS.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">​</a></h2><p>This flow allows you to do the following:</p><ul><li>Publish to public or private repos</li><li>Upload Xcode Framework artifacts to Github releases. No external storage or auth configuration is required.</li><li>Can use either Cocoapods, SPM, or both</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="kotlin-repo">Kotlin Repo<a class="hash-link" href="#kotlin-repo" title="Direct link to heading">​</a></h2><p>You&#x27;ll need find or add the Kotlin Multiplatform module to publish. This module can be in the same project as your Android code (if any), or in a separate repo. In the Kotlin repo you&#x27;ll add the Gradle config and CI to publish Xcode Frameworks.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="spec-repo">Spec Repo<a class="hash-link" href="#spec-repo" title="Direct link to heading">​</a></h2><p>If you are going to publish for Cocoapods, you&#x27;ll also need a Cocoapods spec repo. This is a separate repo that Cocoapods uses to store published version information. This config is somewhat more complex, but still reasonably straightforward to configure.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="configure-the-kotlin-repo">Configure The Kotlin Repo<a class="hash-link" href="#configure-the-kotlin-repo" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="1-access-the-gradle-plugin">1 Access the Gradle plugin<a class="hash-link" href="#1-access-the-gradle-plugin" title="Direct link to heading">​</a></h3><p>Make sure you have <code>mavenCental()</code> set up for Gradle plugins. That means adding it to the <code>pluginManagement</code> or <code>buildscript</code> blocks. In <code>settings.gradle.kts</code>:</p><div class="language-kotlin codeBlockContainer_MPoW theme-code-block" style="--prism-background-color:#2b2b2b;--prism-color:#c8d0de"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-kotlin codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#c8d0de"><span class="token plain">pluginManagement </span><span class="token punctuation" style="color:#c8d0de">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">    repositories </span><span class="token punctuation" style="color:#c8d0de">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">        </span><span class="token function" style="color:#ffc66d">gradlePluginPortal</span><span class="token punctuation" style="color:#c8d0de">(</span><span class="token punctuation" style="color:#c8d0de">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">        </span><span class="token function" style="color:#ffc66d">mavenCentral</span><span class="token punctuation" style="color:#c8d0de">(</span><span class="token punctuation" style="color:#c8d0de">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">    </span><span class="token punctuation" style="color:#c8d0de">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain"></span><span class="token punctuation" style="color:#c8d0de">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note: If you&#x27;re using a SNAPSHOT version of the plugin, add the SNAPSHOT repo as well:</p><div class="language-kotlin codeBlockContainer_MPoW theme-code-block" style="--prism-background-color:#2b2b2b;--prism-color:#c8d0de"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-kotlin codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#c8d0de"><span class="token plain">pluginManagement </span><span class="token punctuation" style="color:#c8d0de">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">    repositories </span><span class="token punctuation" style="color:#c8d0de">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">        </span><span class="token function" style="color:#ffc66d">gradlePluginPortal</span><span class="token punctuation" style="color:#c8d0de">(</span><span class="token punctuation" style="color:#c8d0de">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">        </span><span class="token function" style="color:#ffc66d">mavenCentral</span><span class="token punctuation" style="color:#c8d0de">(</span><span class="token punctuation" style="color:#c8d0de">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">        </span><span class="token function" style="color:#ffc66d">maven</span><span class="token punctuation" style="color:#c8d0de">(</span><span class="token string-literal singleline string" style="color:#6a8759">&quot;https://oss.sonatype.org/content/repositories/snapshots&quot;</span><span class="token punctuation" style="color:#c8d0de">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">    </span><span class="token punctuation" style="color:#c8d0de">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain"></span><span class="token punctuation" style="color:#c8d0de">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="2-modify-the-gradle-build">2 Modify the Gradle Build<a class="hash-link" href="#2-modify-the-gradle-build" title="Direct link to heading">​</a></h3><p>Find the <code>build.gradle.kts</code> file where you configure the multiplatform module you&#x27;d like to publish. Add the KMMBridge Gradle plugin:</p><div class="language-kotlin codeBlockContainer_MPoW theme-code-block" style="--prism-background-color:#2b2b2b;--prism-color:#c8d0de"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-kotlin codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#c8d0de"><span class="token plain">plugins </span><span class="token punctuation" style="color:#c8d0de">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">    </span><span class="token function" style="color:#ffc66d">kotlin</span><span class="token punctuation" style="color:#c8d0de">(</span><span class="token string-literal singleline string" style="color:#6a8759">&quot;multiplatform&quot;</span><span class="token punctuation" style="color:#c8d0de">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">    </span><span class="token function" style="color:#ffc66d">id</span><span class="token punctuation" style="color:#c8d0de">(</span><span class="token string-literal singleline string" style="color:#6a8759">&quot;co.touchlab.faktory.kmmbridge&quot;</span><span class="token punctuation" style="color:#c8d0de">)</span><span class="token plain"> version </span><span class="token string-literal singleline string" style="color:#6a8759">&quot;0.2.2-SNAPSHOT&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain"></span><span class="token punctuation" style="color:#c8d0de">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Later in the same file, add the <code>kmmbridge</code> config block:</p><div class="language-kotlin codeBlockContainer_MPoW theme-code-block" style="--prism-background-color:#2b2b2b;--prism-color:#c8d0de"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-kotlin codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#c8d0de"><span class="token plain">kmmbridge </span><span class="token punctuation" style="color:#c8d0de">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">    </span><span class="token function" style="color:#ffc66d">githubReleaseArtifacts</span><span class="token punctuation" style="color:#c8d0de">(</span><span class="token punctuation" style="color:#c8d0de">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">    </span><span class="token function" style="color:#ffc66d">githubReleaseVersions</span><span class="token punctuation" style="color:#c8d0de">(</span><span class="token punctuation" style="color:#c8d0de">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">    </span><span class="token function" style="color:#ffc66d">spm</span><span class="token punctuation" style="color:#c8d0de">(</span><span class="token punctuation" style="color:#c8d0de">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">    </span><span class="token function" style="color:#ffc66d">cocoapods</span><span class="token punctuation" style="color:#c8d0de">(</span><span class="token string-literal singleline string" style="color:#6a8759">&quot;git@github.com:touchlab/PodSpecs.git&quot;</span><span class="token punctuation" style="color:#c8d0de">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">    versionPrefix</span><span class="token punctuation" style="color:#c8d0de">.</span><span class="token function" style="color:#ffc66d">set</span><span class="token punctuation" style="color:#c8d0de">(</span><span class="token string-literal singleline string" style="color:#6a8759">&quot;0.3&quot;</span><span class="token punctuation" style="color:#c8d0de">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain"></span><span class="token punctuation" style="color:#c8d0de">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>githubReleaseArtifacts()</code> is mandatory for this flow. Without that, files will not be published anywhere (there are other publishing options available).</p><p><code>githubReleaseVersions()</code> is highly recommended. This will use Github releases for release tracking and incrementing. You can use a different version manager, but you need to configure one. See: <a href="/KMMBridge/docs/general/CONFIGURATION_OVERVIEW#version-managers">Version Managers</a> for more detail.</p><p><code>spm()</code> only needs to be added if you want to support SPM. The parameter points at the root directory of your repo. In this case, we have the KMP module in a folder under the repo, so the repo root is one level up. This is where your <code>Package.swift</code> file should be stored.</p><p>Note: this config is only for SPM publishing. To understand how to integrate an SPM build into Xcode, and how to locally build and test Kotlin changes, see <a href="/KMMBridge/docs/spm/IOS_SPM">IOS_SPM</a>.</p><p><code>cocoapods(&quot;[some git repo].git&quot;)</code> is only needed if you plan to publish for Cocoapods. You will need the spec repo mentioned above, properly configured for deployment. See  <a href="/KMMBridge/docs/cocoapods/COCOAPODS_GITHUB_PODSPEC">COCOAPODS_GITHUB_PODSPEC</a> for details on getting the podspec repo configured.</p><p><code>versionPrefix</code> is not technically necessary but highly encouraged. As you publish builds, the semantic version number will be incremented and appended onto the prefix. So, in the example above, the first version would be <code>0.3.0</code>, next <code>0.3.1</code>, and so on.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="3-add-the-github-actions-workflow-call">3 Add the Github Actions workflow call<a class="hash-link" href="#3-add-the-github-actions-workflow-call" title="Direct link to heading">​</a></h3><p>At the top of your project, if it does not already exist, add the folders <code>.github/workflows</code>. Add a file called <code>kmmbridgepnblish.yml</code> there, and copy the following into it.</p><div class="language-yaml codeBlockContainer_MPoW theme-code-block" style="--prism-background-color:#2b2b2b;--prism-color:#c8d0de"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-yaml codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#c8d0de"><span class="token key atrule">name</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"> KMMBridge Publish Release</span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain"></span><span class="token key atrule">on</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"> workflow_dispatch</span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain"></span><span class="token key atrule">jobs</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">  </span><span class="token key atrule">call-kmmbridge-publish</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">    </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"> touchlab/KMMBridgeGithubWorkflow/.github/workflows/faktorybuild.yml@main</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note: if you are using Cocoapods and a podspec repo, your file should look like the following:</p><div class="language-yaml codeBlockContainer_MPoW theme-code-block" style="--prism-background-color:#2b2b2b;--prism-color:#c8d0de"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-yaml codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#c8d0de"><span class="token key atrule">name</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"> KMMBridge Publish Release</span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain"></span><span class="token key atrule">on</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"> workflow_dispatch</span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain"></span><span class="token key atrule">jobs</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">  </span><span class="token key atrule">call-kmmbridge-publish</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">    </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"> touchlab/KMMBridgeGithubWorkflow/.github/workflows/faktorybuild.yml@main</span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">    </span><span class="token key atrule">secrets</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">      </span><span class="token key atrule">PODSPEC_SSH_KEY</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#c8d0de">{</span><span class="token punctuation" style="color:#c8d0de">{</span><span class="token plain"> secrets.PODSPEC_SSH_KEY </span><span class="token punctuation" style="color:#c8d0de">}</span><span class="token punctuation" style="color:#c8d0de">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You need to pass the ssh key configured earlier.</p><p>There are actually 2 versions of the workflow script. When using SPM, the config file <code>Package.swift</code> gets updated to reflect the published url file. If pushed to the main branch, that will force you to pull the latest and mergh when trying to update the code later. It can also result in a conflict for that file. As an alternative, you can use <code>faktorybuildbranches.yml</code>:</p><div class="language-yaml codeBlockContainer_MPoW theme-code-block" style="--prism-background-color:#2b2b2b;--prism-color:#c8d0de"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-yaml codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#c8d0de"><span class="token key atrule">name</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"> KMMBridge Publish Release</span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain"></span><span class="token key atrule">on</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"> workflow_dispatch</span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain"></span><span class="token key atrule">jobs</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">  </span><span class="token key atrule">call-kmmbridge-publish</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#c8d0de"><span class="token plain">    </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:#c8d0de">:</span><span class="token plain"> touchlab/KMMBridgeGithubWorkflow/.github/workflows/faktorybuildbranches.yml@main</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>That script will publish builds to a new branch (named with a random UUID), which will allow publishing new versions without potential file conflicts.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="4-add-and-push-your-code">4 Add and push your code<a class="hash-link" href="#4-add-and-push-your-code" title="Direct link to heading">​</a></h3><p>Push your changes to Github, and make sure they&#x27;re in the default branch.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="publish-a-build">Publish a Build!<a class="hash-link" href="#publish-a-build" title="Direct link to heading">​</a></h2><p>Assuming your configuration is set up correctly, you should be able to publish your first build. In the Kotlin repo&#x27;s Github home page, go to &quot;Actions&quot;, select &quot;KMMBridge Publish Release&quot;, and manually run it.</p><p><img loading="lazy" src="https://tl-navigator-images.s3.us-east-1.amazonaws.com/docimages/2022-10-04_21-14-runbuild.png" alt="runbuild" class="img_E7b_"></p><p>When that run is complete, you should see a green result. If not, please reach out :) This sample project is very small. A larger project may take considerably longer to build, so be prepared to wait...</p><p><img loading="lazy" src="https://tl-navigator-images.s3.us-east-1.amazonaws.com/docimages/2022-10-04_21-19-image-20221004211903511.png" alt="image-20221004211903511" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="next-steps">Next Steps<a class="hash-link" href="#next-steps" title="Direct link to heading">​</a></h2><p>You&#x27;ll want to pull this new build into Xcode. For more information on how to do that, see  <a href="/KMMBridge/docs/IOS_DEV_SETUP">IOS_DEV_SETUP</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="see-also">See Also<a class="hash-link" href="#see-also" title="Direct link to heading">​</a></h2><p><a href="/KMMBridge/docs/TROUBLESHOOTING">TROUBLESHOOTING</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/touchlab/KMMBridge/tree/main/website/docs/DEFAULT_GITHUB_FLOW.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-10-09T18:46:38.000Z">10/9/2022</time></b> by <b>Kevin Galligan</b></span></div></div></footer></article></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#kotlin-repo" class="table-of-contents__link toc-highlight">Kotlin Repo</a></li><li><a href="#spec-repo" class="table-of-contents__link toc-highlight">Spec Repo</a></li><li><a href="#configure-the-kotlin-repo" class="table-of-contents__link toc-highlight">Configure The Kotlin Repo</a><ul><li><a href="#1-access-the-gradle-plugin" class="table-of-contents__link toc-highlight">1 Access the Gradle plugin</a></li><li><a href="#2-modify-the-gradle-build" class="table-of-contents__link toc-highlight">2 Modify the Gradle Build</a></li><li><a href="#3-add-the-github-actions-workflow-call" class="table-of-contents__link toc-highlight">3 Add the Github Actions workflow call</a></li><li><a href="#4-add-and-push-your-code" class="table-of-contents__link toc-highlight">4 Add and push your code</a></li></ul></li><li><a href="#publish-a-build" class="table-of-contents__link toc-highlight">Publish a Build!</a></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next Steps</a></li><li><a href="#see-also" class="table-of-contents__link toc-highlight">See Also</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Touchlab</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://touchlab.co/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/touchlab/KMMBridge" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/TouchlabHQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/KMMBridge/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/touchlab/KMMBridge" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Touchlab</div></div></div></footer></div>
<script src="/KMMBridge/assets/js/runtime~main.8c6f2bed.js"></script>
<script src="/KMMBridge/assets/js/main.d04cb9a9.js"></script>
</body>
</html>